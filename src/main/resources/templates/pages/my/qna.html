<link rel="stylesheet" th:href="@{/css/my/my.css}">
<link rel="stylesheet" th:href="@{/css/basic.css}">
<header th:replace="layout/main/header.html"></header>
<th:block th:replace="layout/my/modal.html"></th:block>
<main style="margin-top: 230px">
  <div id="my">
    <th:block th:replace="layout/my/aside.html"></th:block>
    <main>
      <th:block th:replace="layout/my/banner.html"></th:block>
    <section>
      <h3>문의하기</h3>
      <article>
        <table border="0" class="qna">
          <tr>
            <th>번호</th>
            <th>문의채널</th>
            <th>문의유형</th>
            <th>제목</th>
            <th>작성일</th>
            <th>상태</th>
          </tr>
          <!--  TODO : 문의 유형 출력 수정하기 -->
          <tr th:each="qna, iterStat : ${qnaList}">
            <td th:text="${iterStat.index + 1}">1</td>
            <td th:text="${qna.type == 0 ? '고객센터' : '판매자 게시판'}"></td>
            <td class="cate1" th:data-value="${qna.cate1.categoryName}">1차 유형</td>
            <td th:text="${qna.title}">신용카드 결제 중 오류가 난 경우 어떻게 하나요?</td>
            <td th:text="${#temporals.format(qna.rdate, 'yyyy-MM-dd')}">2024-12-12</td>
            <td><span class="status confirm" th:classappend="${qna.answer != null && !#strings.isEmpty(qna.answer) ? 'answer-complete' : ''}" th:text="${qna.answer != null && !#strings.isEmpty(qna.answer) ? '답변완료' : '검토 중'}"></span>
            </td>
          </tr>

        </table>
        <div
             style="
          width: 100%;
          height: 150px;
          font-size: 14px;
          line-height: 150px;
          text-align: center;
        ">
          문의 내역이 없습니다.
        </div>
<!--
        TODO: my > qna 페이징 처리
-->
        <ul class="paging">
          <li><a class="prev" href="#">이전</a></li>
          <li><a class="num on" href="#">1</a></li>
          <li><a class="num" href="#">2</a></li>
          <li><a class="num" href="#">3</a></li>
          <li><a class="num" href="#">4</a></li>
          <li><a class="num" href="#">5</a></li>
          <li><a class="next" href="#"> 다음</a></li>
        </ul>
      </article>
    </section>
    </main>
  </div>
</main>1`
<footer th:replace="layout/main/footer.html"></footer>

<script>
  const firstCategoryMap = {
    "user": "회원",
    "coupon": "쿠폰/이벤트",
    "order": "주문/결제",
    "delivery": "배송",
    "cancel": "취소/반품/환불",
    "travel": "여행/숙박/항공",
    "safe": "안전결제"
  };

  // DOMContentLoaded 이벤트로 페이지가 로드된 후 실행
  document.addEventListener('DOMContentLoaded', function () {
    // 1차 카테고리명을 한글로 변환하여 표시
    document.querySelectorAll('.cate1').forEach(function (item) {
      const value = item.getAttribute('data-value');
      item.textContent = firstCategoryMap[value] || value; // value에 따라 한글 카테고리명으로 변환
    });
  });
</script>